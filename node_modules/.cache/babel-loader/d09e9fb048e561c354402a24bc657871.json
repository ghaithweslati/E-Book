{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sief0\\\\Desktop\\\\2ING_2\\\\ReactJs\\\\projectsFinal\\\\E-Book\\\\src\\\\components\\\\Book\\\\Book.js\";\nimport React, { useState } from \"react\";\nimport \"./Book.css\";\nimport { fetchMyBorrowed } from \"../../services/members.service\";\n\nfunction Book(props) {\n  const [etatToUpdate, setEtatToUpdate] = useState(props.etat);\n  const [nbExempToUpdate, setNbExempToUpdate] = useState(props.nbExemp);\n\n  const handleUpdateBook = () => {\n    const current = JSON.parse(localStorage.getItem(\"current\"));\n\n    if (current.type == \"Admin\") {\n      if (etatToUpdate == \"Disponible\") {\n        setEtatToUpdate(\"Archivé\");\n        props.updateBook(props.isbn, props.image, props.categorie, props.titre, \"Archivé\", nbExempToUpdate, props.auteur);\n      } else {\n        props.updateBook(props.isbn, props.image, props.categorie, props.titre, \"Disponible\", nbExempToUpdate, props.auteur);\n        setEtatToUpdate(\"Disponible\");\n      }\n    }\n  };\n\n  const handleGetBook = () => {\n    setEtatToUpdate(\"Borrowed\");\n    setNbExempToUpdate(nbExempToUpdate - 1);\n    props.updateBook(props.isbn, props.image, props.categorie, props.titre, \"Borrowed\", nbExempToUpdate, props.auteur);\n    props.getBook(props.isbn, props.image, props.categorie, props.titre, etatToUpdate, nbExempToUpdate, props.auteur);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"book\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require(\"./Cover/\" + props.image),\n    alt: props.titre,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, props.categorie), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    onClick: handleUpdateBook,\n    id: etatToUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, etatToUpdate), React.createElement(\"b\", {\n    \"data-testid\": \"titre-book\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, props.titre), React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, props.dateEmp), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"By \", props.auteur), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, nbExempToUpdate, \" Copies\"), etatToUpdate != \"Archivé\" && props.borrowed < 2 && nbExempToUpdate > 0 && React.createElement(\"p\", {\n    onClick: handleGetBook,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Emprunter\"));\n}\n\nexport default Book;","map":{"version":3,"sources":["C:/Users/sief0/Desktop/2ING_2/ReactJs/projectsFinal/E-Book/src/components/Book/Book.js"],"names":["React","useState","fetchMyBorrowed","Book","props","etatToUpdate","setEtatToUpdate","etat","nbExempToUpdate","setNbExempToUpdate","nbExemp","handleUpdateBook","current","JSON","parse","localStorage","getItem","type","updateBook","isbn","image","categorie","titre","auteur","handleGetBook","getBook","require","dateEmp","borrowed"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Book.css\";\r\nimport { fetchMyBorrowed } from \"../../services/members.service\";\r\n\r\nfunction Book(props) {\r\n  const [etatToUpdate, setEtatToUpdate] = useState(props.etat);\r\n  const [nbExempToUpdate, setNbExempToUpdate] = useState(props.nbExemp);\r\n\r\n  const handleUpdateBook = () => {\r\n    const current = JSON.parse(localStorage.getItem(\"current\"));\r\n    if (current.type == \"Admin\") {\r\n      if (etatToUpdate == \"Disponible\") {\r\n        setEtatToUpdate(\"Archivé\");\r\n        props.updateBook(\r\n          props.isbn,\r\n          props.image,\r\n          props.categorie,\r\n          props.titre,\r\n          \"Archivé\",\r\n          nbExempToUpdate,\r\n          props.auteur\r\n        );\r\n      } else {\r\n        props.updateBook(\r\n          props.isbn,\r\n          props.image,\r\n          props.categorie,\r\n          props.titre,\r\n          \"Disponible\",\r\n          nbExempToUpdate,\r\n          props.auteur\r\n        );\r\n        setEtatToUpdate(\"Disponible\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleGetBook = () => {\r\n    setEtatToUpdate(\"Borrowed\");\r\n    setNbExempToUpdate(nbExempToUpdate - 1);\r\n    props.updateBook(\r\n      props.isbn,\r\n      props.image,\r\n      props.categorie,\r\n      props.titre,\r\n      \"Borrowed\",\r\n      nbExempToUpdate,\r\n      props.auteur\r\n    );\r\n    props.getBook(\r\n      props.isbn,\r\n      props.image,\r\n      props.categorie,\r\n      props.titre,\r\n      etatToUpdate,\r\n      nbExempToUpdate,\r\n      props.auteur\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"book\">\r\n      <img src={require(\"./Cover/\" + props.image)} alt={props.titre} />\r\n      <span>{props.categorie}</span>\r\n      <hr />\r\n      <label onClick={handleUpdateBook} id={etatToUpdate}>\r\n        {etatToUpdate}\r\n      </label>\r\n      <b data-testid=\"titre-book\">{props.titre}</b>\r\n      <b>{props.dateEmp}</b>\r\n      <span>By {props.auteur}</span>\r\n      <h5>{nbExempToUpdate} Copies</h5>\r\n      {etatToUpdate != \"Archivé\" &&\r\n        props.borrowed < 2 &&\r\n        nbExempToUpdate > 0 && <p onClick={handleGetBook}>Emprunter</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Book;\r\n"]},"metadata":{},"sourceType":"module"}