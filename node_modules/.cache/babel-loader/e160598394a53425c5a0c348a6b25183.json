{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sief0\\\\Desktop\\\\2ING_2\\\\ReactJs\\\\projectsFinal\\\\E-Book\\\\src\\\\components\\\\Book\\\\Book.js\";\nimport React, { useState } from \"react\";\nimport './Book.css';\nimport { fetchMyBorrowed } from \"../../services/members.service\";\n\nfunction Book(props) {\n  const [etatToUpdate, setEtatToUpdate] = useState(props.etat);\n  const [nbExempToUpdate, setNbExempToUpdate] = useState(props.nbExemp);\n\n  const handleUpdateBook = () => {\n    const current = JSON.parse(localStorage.getItem('current'));\n\n    if (current.type == 'Admin') {\n      if (etatToUpdate == \"Disponible\") {\n        setEtatToUpdate(\"Archivé\");\n        props.updateBook(props.isbn, props.image, props.categorie, props.titre, 'Archivé', nbExempToUpdate, props.auteur);\n      } else {\n        props.updateBook(props.isbn, props.image, props.categorie, props.titre, 'Disponible', nbExempToUpdate, props.auteur);\n        setEtatToUpdate(\"Disponible\");\n      }\n    }\n  };\n\n  const handleGetBook = () => {\n    setEtatToUpdate(\"Borrowed\");\n    setNbExempToUpdate(nbExempToUpdate - 1);\n    props.updateBook(props.isbn, props.image, props.categorie, props.titre, 'Borrowed', nbExempToUpdate, props.auteur);\n    props.getBook(props.isbn, props.image, props.categorie, props.titre, etatToUpdate, nbExempToUpdate, props.auteur);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"book\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require('./Cover/' + props.image),\n    alt: props.titre,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, props.categorie), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    onClick: handleUpdateBook,\n    id: etatToUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, etatToUpdate), React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, props.titre), React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, props.dateEmp), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"By \", props.auteur), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, nbExempToUpdate, \" Copies\"), etatToUpdate != \"Archivé\" && props.borrowed < 2 && nbExempToUpdate > 0 && React.createElement(\"p\", {\n    onClick: handleGetBook,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Emprunter\"));\n}\n\nexport default Book;","map":{"version":3,"sources":["C:/Users/sief0/Desktop/2ING_2/ReactJs/projectsFinal/E-Book/src/components/Book/Book.js"],"names":["React","useState","fetchMyBorrowed","Book","props","etatToUpdate","setEtatToUpdate","etat","nbExempToUpdate","setNbExempToUpdate","nbExemp","handleUpdateBook","current","JSON","parse","localStorage","getItem","type","updateBook","isbn","image","categorie","titre","auteur","handleGetBook","getBook","require","dateEmp","borrowed"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAO,YAAP;AACA,SAASC,eAAT,QAAgC,gCAAhC;;AAKA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACnB,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCL,QAAQ,CAACG,KAAK,CAACG,IAAP,CAAhD;AACA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCR,QAAQ,CAACG,KAAK,CAACM,OAAP,CAAtD;;AAEA,QAAMC,gBAAgB,GAAG,MAAM;AAE/B,UAAMC,OAAO,GAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAd;;AACA,QAAGJ,OAAO,CAACK,IAAR,IAAc,OAAjB,EACA;AACE,UAAGZ,YAAY,IAAE,YAAjB,EACA;AACEC,QAAAA,eAAe,CAAC,SAAD,CAAf;AACAF,QAAAA,KAAK,CAACc,UAAN,CAAiBd,KAAK,CAACe,IAAvB,EAA6Bf,KAAK,CAACgB,KAAnC,EAA0ChB,KAAK,CAACiB,SAAhD,EAA0DjB,KAAK,CAACkB,KAAhE,EAAsE,SAAtE,EAAgFd,eAAhF,EAAgGJ,KAAK,CAACmB,MAAtG;AACD,OAJD,MAMA;AACAnB,QAAAA,KAAK,CAACc,UAAN,CAAiBd,KAAK,CAACe,IAAvB,EAA6Bf,KAAK,CAACgB,KAAnC,EAA0ChB,KAAK,CAACiB,SAAhD,EAA0DjB,KAAK,CAACkB,KAAhE,EAAsE,YAAtE,EAAmFd,eAAnF,EAAmGJ,KAAK,CAACmB,MAAzG;AACEjB,QAAAA,eAAe,CAAC,YAAD,CAAf;AACA;AAEH;AACE,GAjBH;;AAoBA,QAAMkB,aAAa,GAAG,MAAM;AACxBlB,IAAAA,eAAe,CAAC,UAAD,CAAf;AACAG,IAAAA,kBAAkB,CAACD,eAAe,GAAC,CAAjB,CAAlB;AACFJ,IAAAA,KAAK,CAACc,UAAN,CAAiBd,KAAK,CAACe,IAAvB,EAA6Bf,KAAK,CAACgB,KAAnC,EAA0ChB,KAAK,CAACiB,SAAhD,EAA0DjB,KAAK,CAACkB,KAAhE,EAAsE,UAAtE,EAAiFd,eAAjF,EAAiGJ,KAAK,CAACmB,MAAvG;AACAnB,IAAAA,KAAK,CAACqB,OAAN,CAAcrB,KAAK,CAACe,IAApB,EAA0Bf,KAAK,CAACgB,KAAhC,EAAuChB,KAAK,CAACiB,SAA7C,EAAuDjB,KAAK,CAACkB,KAA7D,EAAmEjB,YAAnE,EAAgFG,eAAhF,EAAgGJ,KAAK,CAACmB,MAAtG;AAED,GAND;;AASA,SACF;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAK,IAAA,GAAG,EAAGG,OAAO,CAAC,aAAWtB,KAAK,CAACgB,KAAlB,CAAlB;AAA8C,IAAA,GAAG,EAAEhB,KAAK,CAACkB,KAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOlB,KAAK,CAACiB,SAAb,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE;AAAO,IAAA,OAAO,EAAEV,gBAAhB;AAAkC,IAAA,EAAE,EAAEN,YAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqDA,YAArD,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAID,KAAK,CAACkB,KAAV,CALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIlB,KAAK,CAACuB,OAAV,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAUvB,KAAK,CAACmB,MAAhB,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKf,eAAL,YARF,EASGH,YAAY,IAAE,SAAd,IAA2BD,KAAK,CAACwB,QAAN,GAAe,CAA1C,IAAgDpB,eAAe,GAAC,CAAhE,IAAqE;AAAG,IAAA,OAAO,EAAEgB,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATxE,CADE;AAaD;;AAED,eAAerB,IAAf","sourcesContent":["import React, {useState} from \"react\"\r\nimport './Book.css';\r\nimport { fetchMyBorrowed } from \"../../services/members.service\"\r\n\r\n\r\n\r\n\r\nfunction Book(props) {\r\n  const [etatToUpdate, setEtatToUpdate] = useState(props.etat)\r\n  const [nbExempToUpdate, setNbExempToUpdate] = useState(props.nbExemp)\r\n\r\n  const handleUpdateBook = () => {\r\n    \r\n  const current=JSON.parse(localStorage.getItem('current'));\r\n  if(current.type=='Admin')\r\n  {\r\n    if(etatToUpdate==\"Disponible\")\r\n    {\r\n      setEtatToUpdate(\"Archivé\");\r\n      props.updateBook(props.isbn, props.image, props.categorie,props.titre,'Archivé',nbExempToUpdate,props.auteur);\r\n    }\r\n    else\r\n    {\r\n    props.updateBook(props.isbn, props.image, props.categorie,props.titre,'Disponible',nbExempToUpdate,props.auteur);\r\n      setEtatToUpdate(\"Disponible\");\r\n     }\r\n\r\n  }\r\n    }\r\n\r\n\r\n  const handleGetBook = () => {\r\n      setEtatToUpdate(\"Borrowed\");\r\n      setNbExempToUpdate(nbExempToUpdate-1);\r\n    props.updateBook(props.isbn, props.image, props.categorie,props.titre,'Borrowed',nbExempToUpdate,props.auteur);\r\n    props.getBook(props.isbn, props.image, props.categorie,props.titre,etatToUpdate,nbExempToUpdate,props.auteur);\r\n\r\n  }\r\n\r\n  \r\n  return (\r\n<div className=\"book\">\r\n<img src={ require('./Cover/'+props.image) }  alt={props.titre}/>\r\n  <span>{props.categorie}</span>\r\n  <hr/>\r\n  <label onClick={handleUpdateBook} id={etatToUpdate}>{etatToUpdate}</label>\r\n  <b>{props.titre}</b>\r\n  <b>{props.dateEmp}</b>\r\n  <span>By {props.auteur}</span>\r\n  <h5>{nbExempToUpdate} Copies</h5>\r\n  {etatToUpdate!=\"Archivé\" && props.borrowed<2  && nbExempToUpdate>0 && <p onClick={handleGetBook}>Emprunter</p>}\r\n</div>\r\n  );\r\n}\r\n\r\nexport default Book;"]},"metadata":{},"sourceType":"module"}